{% extends 'notes/main.html' %}
{% block content %}
<div id="content">
    <div class="container">
        <div class="col-md-7 col-lg-8">
            <div class="col-12">
                <h2>{{ note.title }}</h2>
            </div>
            <div class="col-12 note-body">
                <p>{{ note.body }}</p>
            </div>
            <div class="note-tags">
                {% for tag in note.tags %}
                <div class="note-tag-list">{{ tag.tag }}</div>
                {% endfor %}
            </div>
            <div class="col-12">
                <a href="{% url 'edit' note.id %}" class="btn btn-primary">Edit</a>
                <a href="{% url 'delete' note.id %}" class="btn btn-danger">Delete</a>
            </div>
        </div>
    </div>
</div>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    divBody = document.querySelector(".note-body");
      body = divBody.innerHTML;
      urls = getUrlsFromText(body);
      if (urls) {
        for (var j = 0; j < urls.length; j++) {
            divBody.innerHTML = divBody.innerHTML.replace(
            urls[j],
            '<a href="' + urls[j] + '" target="_blank">' + urls[j] + "</a>"
            );
            // TODO: проблема с подгрузкой страниц в getOpenGraph.
            // CROS policy.
            // addOpenGraph(notes[i], urls[j]);
        }
      }
  });
</script>
{% endblock %}